{% extends "_base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <!-- ATIVIDADES -->
  <div class="card shadow-lg border-0 mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary mb-0">
          <i class="bi bi-journal-text me-2"></i>Atividades
        </h2>
        <a href="/itemacademico/add/" class="btn btn-success shadow-sm">
          <i class="bi bi-plus-lg me-1"></i>Novo Item 
        </a>
      </div>

      <div class="table-responsive">
        <table class="table table-hover align-middle text-center table-bordered border-light shadow-sm">
          <thead class="table-primary">
            <tr>
              <th>Título</th>
              <th>Descrição</th>
              <th>Criação</th>
              <th>Entrega</th>
              <th>Arquivo</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for atividade in atividades %}
            <tr>
              <td>{{ atividade.titulo }}</td>
              <td>{{ atividade.descricao }}</td>
              <td class="text-nowrap">{{ atividade.data_criacao|date:"d/m/Y H:i" }}</td>
              <td class="text-nowrap">{{ atividade.data_entrega|date:"d/m/Y H:i" }}</td>
              <td>
                {% if atividade.arquivo %}
                  <a href="{{ atividade.arquivo.url }}" class="btn btn-outline-primary btn-sm" target="_blank">
                    <i class="bi bi-download"></i> Baixar
                  </a>
                {% else %}
                  <span class="text-muted">Sem arquivo</span>
                {% endif %}
              </td>
              <td class="text-nowrap">
                <a href="/itemacademico/{{ atividade.id }}/" class="btn btn-outline-secondary btn-sm me-1" title="Detalhar">
                  <i class="bi bi-eye"></i> 
                </a>
                <a href="/itemacademico/edit/{{ atividade.id }}/" class="btn btn-outline-warning btn-sm me-1" title="Editar">
                  <i class="bi bi-pencil-square"></i> 
                </a>
                <a href="/itemacademico/delete/{{ atividade.id }}/" class="btn btn-outline-danger btn-sm" title="Excluir" onclick="return confirm('Tem certeza que deseja excluir?');">
                  <i class="bi bi-trash"></i> 
                </a>
              </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-muted">Nenhuma atividade cadastrada.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- MATERIAIS -->
  <div class="card shadow-lg border-0">
    <div class="card-body">
      <h2 class="text-primary mb-4">
        <i class="bi bi-folder-fill me-2"></i>Materiais de Apoio
      </h2>

      <div class="table-responsive">
        <table class="table table-hover align-middle text-center table-bordered border-light shadow-sm">
          <thead class="table-primary">
            <tr>
              <th>Título</th>
              <th>Descrição</th>
              <th>Criação</th>
              <th>Arquivo</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for material in materiais %}
            <tr>
              <td>{{ material.titulo }}</td>
              <td>{{ material.descricao }}</td>
              <td class="text-nowrap">{{ material.data_criacao|date:"d/m/Y H:i" }}</td>
              <td>
                {% if material.arquivo %}
                  <a href="{{ material.arquivo.url }}" class="btn btn-outline-primary btn-sm" target="_blank">
                    <i class="bi bi-download"></i> Baixar
                  </a>
                {% else %}
                  <span class="text-muted">Sem arquivo</span>
                {% endif %}
              </td>
              <td class="text-nowrap">
                <a href="/itemacademico/{{ material.id }}/" class="btn btn-outline-secondary btn-sm me-1">
                  <i class="bi bi-eye"></i> 
                </a>
               <a href="/itemacademico/edit/{{ atividade.id }}/" class="btn btn-outline-warning btn-sm me-1">
                  <i class="bi bi-pencil-square"></i> 
                </a>


                <a href="/itemacademico/delete/{{ material.id }}/" class="btn btn-outline-danger btn-sm" onclick="return confirm('Tem certeza que deseja excluir?');">
                  <i class="bi bi-trash"></i>
                </a>
              </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="text-muted">Nenhum material cadastrado.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
