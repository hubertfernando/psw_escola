{% extends "_base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">

  <!-- Cabeçalho e botão criar -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary mb-0">
      <i class="bi bi-book-fill me-2"></i>
      {% if turma %}
        Disciplinas da Turma {{ turma.get_ano_display }} - {{ turma.get_curso_display }}
      {% else %}
        Listagem de Disciplinas
      {% endif %}
    </h2>
    {% if perms.disciplina.add_disciplina %}
    <a href="/disciplina/cria/?turma={{ turma.id }}" class="btn btn-success shadow-sm">
      <i class="bi bi-plus-lg me-1"></i>Nova Disciplina
    </a>
    {% endif %}
  </div>

  <div class="d-flex flex-column gap-4">
    {% for disciplina in disciplinas %}
      <div
        class="card shadow-sm rounded-4 d-flex flex-row align-items-center p-3"
        style="cursor: pointer;"
        onclick='window.location.href="{% url "itemacademico:itens_por_disciplina" disciplina.id %}";'
      >
        
        <!-- Barra colorida esquerda -->
        <div style="width: 120px; height: 80px; background: linear-gradient(135deg, #0d6efd, #6610f2, #20c997); border-radius: 0.75rem;"></div>
        
        <!-- Conteúdo principal -->
        <div class="flex-grow-1 ps-4">
          <h5 class="mb-1 fw-semibold">{{ disciplina.nome }}</h5>
          <p class="text-muted mb-0">Carga Horária: {{ disciplina.carga_horaria }}</p>
        </div>

        <!-- Botões de ação -->
        <div class="d-flex gap-2">
          {% if perms.disciplina.view_disciplina %}
          <a href="/disciplina/{{ disciplina.id }}/" class="btn btn-outline-secondary btn-sm me-1" title="Detalhar" onclick="event.stopPropagation();">
              <i class="bi bi-eye"></i> Ver
          </a>

          <a href="/disciplina/atualiza/{{ disciplina.id }}/" class="btn btn-outline-warning btn-sm me-1" title="Editar" onclick="event.stopPropagation();">
            <i class="bi bi-pencil-square"></i> Editar
          </a>

          <a href="/disciplina/delete/{{ disciplina.id }}/" class="btn btn-outline-danger btn-sm" title="Excluir"
            onclick="event.stopPropagation(); return confirm('Tem certeza que deseja excluir esta disciplina?');">
            <i class="bi bi-trash"></i> Excluir
          </a>

          {% endif %}
        </div>

      </div>
    {% empty %}
      <div class="alert alert-info text-center rounded-4">
        Nenhuma disciplina cadastrada.
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
